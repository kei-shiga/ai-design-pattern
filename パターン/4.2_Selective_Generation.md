# 4.2 Selective Generation (選択的生成)

## 概要
「全てのコードをAIに書かせる」のではなく、**「コアなビジネスロジック」は人間が主導し、「ボイラープレート（定型文）」「ユーティリティ」「テスト」などはAIに任せる**という、役割分担を明確にするパターンです。これにより、重要部分のブラックボックス化を防ぎ、保守性を維持します。

## 詳細・実施手順

チームやプロジェクトで「AIに任せる領域」と「人間が責任を持つ領域」を定義します。

### AIに任せる領域 (High Autonomy)
これらは定型的であり、パターンが決まっているため、AIが高い精度で生成できます。
- **ボイラープレート:** APIのエンドポイント定義、設定ファイルの雛形。
- **データ変換 (Mapper):** JSONからオブジェクトへの変換、DTO定義。
- **ユニットテスト:** 正常系・異常系のテストケース列挙と実装。
- **ドキュメント:** Docstring、シンプルなAPIドキュメントの生成。
- **ユーティリティ:** 日付操作、文字列処理などの汎用関数。

### 人間が主導する領域 (Human Led / AI Assisted)
これらはシステムの核であり、深いドメイン知識や意思決定が必要です。
- **コアビジネスロジック:** 複雑な計算ルール、商習慣に基づく分岐処理。
- **アーキテクチャ設計:** ディレクトリ構成、クラス間の関係性、DBスキーマ設計。
- **セキュリティ要件:** 認証・認可のフロー、暗号化ポリシーの決定。
- **複雑な仕様変更:** 既存の大規模なコードベースに対する、影響範囲の広い修正。

## 選択的生成の実践フロー

1. **設計:**
   * 人間がクラス図やシーケンス図、あるいは疑似コードでロジックの骨子を作成します。
2. **枠組み生成:**
   * AIに「クラスの枠組み（メソッド定義のみ、中身は空）」や「型定義」を生成させます。
3. **コア実装:**
   * 重要なメソッドの中身（ビジネスロジック）を人間が実装します。この際、AIを「単なる補完ツール（Copilotのオートコンプリート）」として使い、ロジックの決定権は人間が持ちます。
4. **周辺生成:**
   * ログ出力、エラーハンドリング、単純なGetter/Setter、テストコードなどをAIに一括生成させます。

## 判断チェックリスト

タスクをAIに依頼する前に確認するチェックリスト例です。

| 項目 | 判定 | 推奨アクション |
| :--- | :--- | :--- |
| **新規性・創造性** | 高い | 人間が主導し、AIは壁打ち相手にする |
| **定型度** | 高い | AIにZero-Shotで生成させる |
| **ドメイン知識** | 必要 | 人間が詳細なコンテキストを与えるか、自ら書く |
| **リスク・重要度** | 高い | 人間が書き、AIにレビューさせる |

## メリット
- **ブラックボックス化の防止:** 重要なロジックを人間が理解している状態を保てます。
- **トラブル対応力:** 障害発生時、コアロジックを人間が書いている（理解している）ため、迅速に原因究明・修正が可能です。
- **効率と品質のバランス:** 単純作業はAIで高速化しつつ、品質要件の高い部分は人間の注意力を資源として集中させることができます。
